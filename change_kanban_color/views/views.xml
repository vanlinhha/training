<odoo>
    <data>


        <record id="task_type_edit_inherit" model="ir.ui.view">
            <field name="name">project.task.inherit</field>
            <field name="model">project.task</field>
            <field name="inherit_id" ref="project.view_task_kanban"/>
            <field name="arch" type="xml">
                <xpath expr="//ul[@class='oe_kanban_colorpicker']" position="replace">

                </xpath>
            </field>
        </record>

        <record id="task_type_form_inherit" model="ir.ui.view">
            <field name="name">project.task.form.inherit</field>
            <field name="model">project.task.type</field>
            <field name="inherit_id" ref="project.task_type_edit"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='description']" position="after">
                    <label for="legend_done" string=" 0 - #FFFFFF" class="oe_kanban_color_view oe_kanban_color_view_0 oe_project_kanban_legend"/>
                    <label for="legend_done" string=" 1 - #d8d8d8" class="oe_kanban_color_view oe_kanban_color_view_1 oe_project_kanban_legend"/>
                    <label for="legend_done" string=" 2 - #e5d8e3 " class="oe_kanban_color_view oe_kanban_color_view_2 oe_project_kanban_legend"/>
                    <label for="legend_done" string=" 3 - #ece9c2" class="oe_kanban_color_view oe_kanban_color_view_3 oe_project_kanban_legend"/>
                    <label for="legend_done" string=" 4 - #dee180" class="oe_kanban_color_view oe_kanban_color_view_4 oe_project_kanban_legend"/>
                    <label for="legend_done" string=" 5 - #abd4cc" class="oe_kanban_color_view oe_kanban_color_view_5 oe_project_kanban_legend"/>
                    <label for="legend_done" string=" 6 - #b8e3e8" class="oe_kanban_color_view oe_kanban_color_view_6 oe_project_kanban_legend"/>
                    <label for="legend_done" string=" 7 - #f4ddab" class="oe_kanban_color_view oe_kanban_color_view_7 oe_project_kanban_legend"/>
                    <label for="legend_done" string=" 8 - #7f637d" class="oe_kanban_color_view oe_kanban_color_view_8 oe_project_kanban_legend"/>
                    <label for="legend_done" string=" 9 - #d8c5d5" class="oe_kanban_color_view oe_kanban_color_view_9 oe_project_kanban_legend"/>


                    <field name="color" widget="selection"/>

                </xpath>
            </field>
        </record>


         <!-- Project Task Kanban View -->
        <record model="ir.ui.view" id="view_task_type_kanban">
            <field name="name">project.task.type.kanban</field>
            <field name="model">project.task.type</field>
            <field name="arch" type="xml">
                <kanban class="o_kanban_small_column o_kanban_project_tasks" on_create="quick_create">
                    <field name="color"/>
                    <field name="name"/>
                    <field name="fold"/>
                    <field name="description"/>
                    <templates>
                    <t t-name="kanban-box">
                        <div t-attf-class="oe_kanban_color_#{kanban_getcolor(record.color.raw_value)} oe_kanban_card oe_kanban_global_click">

                            <div class="o_dropdown_kanban dropdown" groups="base.group_user">
                                <a class="dropdown-toggle btn" data-toggle="dropdown" href="#" >
                                    <span class="fa fa-bars fa-lg"/>
                                </a>
                                <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                                    <li><ul class="oe_kanban_colorpicker" data-field="color"/></li>
                                </ul>
                            </div>
                            <div class="oe_kanban_content">
                                <div>
                                    <strong><field name="name"/></strong>
                                </div>
                            </div>
                            <div class="oe_clear"></div>
                        </div>
                    </t>
                    </templates>
                </kanban>
            </field>
         </record>

        <record id="open_task_type_form" model="ir.actions.act_window">
            <field name="name">Stages</field>
            <field name="res_model">project.task.type</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,kanban</field>
            <field name="view_id" ref="project.task_type_tree"/>
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Click to add a stage in the task pipeline.
              </p><p>
                Define the steps that will be used in the project from the
                creation of the task, up to the closing of the task or issue.
                You will use these stages in order to track the progress in
                solving a task or an issue.
              </p>
            </field>
        </record>

        <menuitem action="open_task_type_form" id="project.menu_project_config_project" name="Stages" parent="project.menu_project_config" sequence="3" groups="project.group_project_manager"/>



        <template id="assets_backend123" name="change_kanban_color assets" inherit_id="web.assets_backend">
            <xpath expr="." position="inside">
		         <link rel="stylesheet" href="/change_kanban_color/static/src/css/custom.less"/>
            </xpath>
        </template>

    </data>
</odoo>